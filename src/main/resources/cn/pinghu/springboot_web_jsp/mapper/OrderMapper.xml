<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.pinghu.springboot_web_jsp.mapper.OrderMapper">
  <resultMap id="BaseResultMap" type="cn.pinghu.springboot_web_jsp.entity.OrderEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="OrderNo" jdbcType="VARCHAR" property="orderno" />
    <result column="OrderDate" jdbcType="TIMESTAMP" property="orderdate" />
    <result column="DeliveryTime" jdbcType="VARCHAR" property="deliverytime" />
    <result column="TotalPrice" jdbcType="DECIMAL" property="totalprice" />
    <result column="Discount" jdbcType="DECIMAL" property="discount" />
    <result column="Paid" jdbcType="DECIMAL" property="paid" />
    <result column="CustomerName" jdbcType="VARCHAR" property="customername" />
    <result column="Receiver" jdbcType="VARCHAR" property="receiver" />
    <result column="Mobile" jdbcType="VARCHAR" property="mobile" />
    <result column="Province" jdbcType="VARCHAR" property="province" />
    <result column="City" jdbcType="VARCHAR" property="city" />
    <result column="Area" jdbcType="VARCHAR" property="area" />
    <result column="Address" jdbcType="VARCHAR" property="address" />
    <result column="BuyerMark" jdbcType="VARCHAR" property="buyermark" />
    <result column="Remark" jdbcType="VARCHAR" property="remark" />
    <result column="Voucher" jdbcType="VARCHAR" property="voucher" />
    <result column="RouteNo" jdbcType="TINYINT" property="routeno" />
    <result column="Status" jdbcType="BOOLEAN" property="status" />
    <result column="GmtCreated" jdbcType="TIMESTAMP" property="gmtcreated" />
    <result column="GmtModified" jdbcType="TIMESTAMP" property="gmtmodified" />
  </resultMap>

  <sql id="Base_Column_List">
    ID, OrderNo, OrderDate, DeliveryTime, TotalPrice, Discount, Paid, CustomerName, Receiver,
    Mobile, Province, City, Area, Address, BuyerMark, Remark, Voucher, RouteNo, `Status`, 
    GmtCreated, GmtModified
  </sql>

  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from order
    where ID = #{id,jdbcType=INTEGER}
  </select>

    <select id="selectCountOrder" resultType="java.lang.Integer">
      SELECT
        COUNT(1)
      FROM
       `order`
    </select>

  <select id="selectOrderList" resultType="cn.pinghu.springboot_web_jsp.domain.OrderDo">
    SELECT
      <include refid="Base_Column_List"/>
    FROM
      `order`
    <if test="start != null and end !=null">
      LIMIT  #{start} , #{end}
    </if>

  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from order
    where ID = #{id,jdbcType=INTEGER}
  </delete>

  <insert id="insert" keyColumn="ID" keyProperty="id" parameterType="cn.pinghu.springboot_web_jsp.entity.OrderEntity" useGeneratedKeys="true">
    insert into order (OrderNo, OrderDate, DeliveryTime,
      TotalPrice, Discount, Paid, 
      CustomerName, Receiver, Mobile, 
      Province, City, Area, 
      Address, BuyerMark, Remark, 
      Voucher, RouteNo, `Status`, 
      GmtCreated, GmtModified)
    values (#{orderno,jdbcType=VARCHAR}, #{orderdate,jdbcType=TIMESTAMP}, #{deliverytime,jdbcType=VARCHAR}, 
      #{totalprice,jdbcType=DECIMAL}, #{discount,jdbcType=DECIMAL}, #{paid,jdbcType=DECIMAL}, 
      #{customername,jdbcType=VARCHAR}, #{receiver,jdbcType=VARCHAR}, #{mobile,jdbcType=VARCHAR}, 
      #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, #{area,jdbcType=VARCHAR}, 
      #{address,jdbcType=VARCHAR}, #{buyermark,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, 
      #{voucher,jdbcType=VARCHAR}, #{routeno,jdbcType=TINYINT}, #{status,jdbcType=BOOLEAN}, 
      #{gmtcreated,jdbcType=TIMESTAMP}, #{gmtmodified,jdbcType=TIMESTAMP})
  </insert>

  <insert id="insertSelective" keyColumn="ID" keyProperty="id" parameterType="cn.pinghu.springboot_web_jsp.entity.OrderEntity" useGeneratedKeys="true">
    insert into order
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="orderno != null">
        OrderNo,
      </if>
      <if test="orderdate != null">
        OrderDate,
      </if>
      <if test="deliverytime != null">
        DeliveryTime,
      </if>
      <if test="totalprice != null">
        TotalPrice,
      </if>
      <if test="discount != null">
        Discount,
      </if>
      <if test="paid != null">
        Paid,
      </if>
      <if test="customername != null">
        CustomerName,
      </if>
      <if test="receiver != null">
        Receiver,
      </if>
      <if test="mobile != null">
        Mobile,
      </if>
      <if test="province != null">
        Province,
      </if>
      <if test="city != null">
        City,
      </if>
      <if test="area != null">
        Area,
      </if>
      <if test="address != null">
        Address,
      </if>
      <if test="buyermark != null">
        BuyerMark,
      </if>
      <if test="remark != null">
        Remark,
      </if>
      <if test="voucher != null">
        Voucher,
      </if>
      <if test="routeno != null">
        RouteNo,
      </if>
      <if test="status != null">
        `Status`,
      </if>
      <if test="gmtcreated != null">
        GmtCreated,
      </if>
      <if test="gmtmodified != null">
        GmtModified,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="orderno != null">
        #{orderno,jdbcType=VARCHAR},
      </if>
      <if test="orderdate != null">
        #{orderdate,jdbcType=TIMESTAMP},
      </if>
      <if test="deliverytime != null">
        #{deliverytime,jdbcType=VARCHAR},
      </if>
      <if test="totalprice != null">
        #{totalprice,jdbcType=DECIMAL},
      </if>
      <if test="discount != null">
        #{discount,jdbcType=DECIMAL},
      </if>
      <if test="paid != null">
        #{paid,jdbcType=DECIMAL},
      </if>
      <if test="customername != null">
        #{customername,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="province != null">
        #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null">
        #{city,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="address != null">
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="buyermark != null">
        #{buyermark,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="voucher != null">
        #{voucher,jdbcType=VARCHAR},
      </if>
      <if test="routeno != null">
        #{routeno,jdbcType=TINYINT},
      </if>
      <if test="status != null">
        #{status,jdbcType=BOOLEAN},
      </if>
      <if test="gmtcreated != null">
        #{gmtcreated,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtmodified != null">
        #{gmtmodified,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="cn.pinghu.springboot_web_jsp.entity.OrderEntity">
    update order
    <set>
      <if test="orderno != null">
        OrderNo = #{orderno,jdbcType=VARCHAR},
      </if>
      <if test="orderdate != null">
        OrderDate = #{orderdate,jdbcType=TIMESTAMP},
      </if>
      <if test="deliverytime != null">
        DeliveryTime = #{deliverytime,jdbcType=VARCHAR},
      </if>
      <if test="totalprice != null">
        TotalPrice = #{totalprice,jdbcType=DECIMAL},
      </if>
      <if test="discount != null">
        Discount = #{discount,jdbcType=DECIMAL},
      </if>
      <if test="paid != null">
        Paid = #{paid,jdbcType=DECIMAL},
      </if>
      <if test="customername != null">
        CustomerName = #{customername,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        Receiver = #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        Mobile = #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="province != null">
        Province = #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null">
        City = #{city,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        Area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="address != null">
        Address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="buyermark != null">
        BuyerMark = #{buyermark,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        Remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="voucher != null">
        Voucher = #{voucher,jdbcType=VARCHAR},
      </if>
      <if test="routeno != null">
        RouteNo = #{routeno,jdbcType=TINYINT},
      </if>
      <if test="status != null">
        `Status` = #{status,jdbcType=BOOLEAN},
      </if>
      <if test="gmtcreated != null">
        GmtCreated = #{gmtcreated,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtmodified != null">
        GmtModified = #{gmtmodified,jdbcType=TIMESTAMP},
      </if>
    </set>
    where ID = #{id,jdbcType=INTEGER}
  </update>

  <update id="updateByPrimaryKey" parameterType="cn.pinghu.springboot_web_jsp.entity.OrderEntity">
    update order
    set OrderNo = #{orderno,jdbcType=VARCHAR},
      OrderDate = #{orderdate,jdbcType=TIMESTAMP},
      DeliveryTime = #{deliverytime,jdbcType=VARCHAR},
      TotalPrice = #{totalprice,jdbcType=DECIMAL},
      Discount = #{discount,jdbcType=DECIMAL},
      Paid = #{paid,jdbcType=DECIMAL},
      CustomerName = #{customername,jdbcType=VARCHAR},
      Receiver = #{receiver,jdbcType=VARCHAR},
      Mobile = #{mobile,jdbcType=VARCHAR},
      Province = #{province,jdbcType=VARCHAR},
      City = #{city,jdbcType=VARCHAR},
      Area = #{area,jdbcType=VARCHAR},
      Address = #{address,jdbcType=VARCHAR},
      BuyerMark = #{buyermark,jdbcType=VARCHAR},
      Remark = #{remark,jdbcType=VARCHAR},
      Voucher = #{voucher,jdbcType=VARCHAR},
      RouteNo = #{routeno,jdbcType=TINYINT},
      `Status` = #{status,jdbcType=BOOLEAN},
      GmtCreated = #{gmtcreated,jdbcType=TIMESTAMP},
      GmtModified = #{gmtmodified,jdbcType=TIMESTAMP}
    where ID = #{id,jdbcType=INTEGER}
  </update>

    <update id="updateOrderByOrderNo">
      UPDATE
          `order`
      SET
        `RouteNo` =
       <foreach collection="orderRoutes" item="item" separator=" " open="case OrderNo" close="end">
           WHEN #{item.orderNo} THEN #{item.routeNo}
        </foreach>
           WHERE `OrderNo` IN
      <foreach collection="orderRoutes" item="item" separator="," open="(" close=")">
          #{item.orderNo}
      </foreach>
    </update>
</mapper>